"use strict";var Loader={loading:!1,loadingForeground:!1,loadingBackground:!1,waitingForeground:{},waitingBackground:{},on:{start:function(o){},stateUpdate:function(o){},stop:function(o){},stopAll:function(){}},isActive:function(){return Boolean(Object.keys(Loader.waitingForeground).length||Object.keys(Loader.waitingBackground).length)},isForeground:function(){return 0<Object.keys(Loader.waitingForeground).length},isBackground:function(){return 0<Object.keys(Loader.waitingBackground).length},start:function(o,e){o||(o="default"),void 0===e&&(e=!0);var n=!1;e?(n=Loader.isBackground(),Loader.waitingForeground[o]=!0):Loader.waitingBackground[o]=!0,Loader.on.start(o);var r=Loader.isForeground();return document.body.classList.add("loading",r?"loading-foreground":"loading-background"),n&&Loader.timers.backgroundCloseout.setup(),document.body.classList.remove(r?"loading-background":"loading-foreground"),Loader.updateStates(),Loader},startBackground:function(o){return Loader.start(o,!1)},updateStates:function(){var o=Loader.isActive(),e=Loader.isForeground(),n=Loader.isBackground();Loader.loading=o,Loader.loadingForeground=e,Loader.loadingBackground=n,Loader.on.stateUpdate({loading:o,foreground:e,background:n})},timers:{foregroundCloseout:{handle:null,interval:1e3,callback:function(){document.body.classList.remove("loading-foreground-closing")},setup:function(){document.body.classList.add("loading-foreground-closing"),Loader.timers.foregroundCloseout.handle=setTimeout(Loader.timers.foregroundCloseout.callback,Loader.timers.foregroundCloseout.interval)},teardown:function(){cancelTimeout(Loader.timers.foregroundCloseout.handle)}},backgroundCloseout:{handle:null,interval:1e3,callback:function(){document.body.classList.remove("loading-background-closing")},setup:function(){document.body.classList.add("loading-background-closing"),Loader.timers.backgroundCloseout.handle=setTimeout(Loader.timers.backgroundCloseout.callback,Loader.timers.backgroundCloseout.interval)},teardown:function(){cancelTimeout(Loader.timers.backgroundCloseout.handle)}}},stop:function(o){o||(o="default");var e=Loader.waitingForeground[o];if(e)delete Loader.waitingForeground[o];else{if(!Loader.waitingBackground[o])return;delete Loader.waitingBackground[o]}return Loader.on.stop(o),Loader.isActive()?Loader.isForeground()||(document.body.classList.add("loading-background"),document.body.classList.remove("loading-foreground"),Loader.timers.foregroundCloseout.setup()):(document.body.classList.remove("loading","loading-foreground","loading-background"),e?Loader.timers.foregroundCloseout.setup():Loader.timers.backgroundCloseout.setup(),Loader.on.stopAll()),Loader.updateStates(),Loader},clear:function(){return Loader.waitingForeground={},Loader.waitingBackground={},Loader.stop(),Loader},templateHTML:'<div class="loader-bar"></div><div class="loader-spinner"></div>',init:function(){var o=document.createElement("div");o.innerHTML=Loader.templateHTML,document.body.appendChild(o)}};document.addEventListener("DOMContentLoaded",Loader.init);